import{_ as t,p,q as o,J as a,s as n,G as s}from"./framework-d4dfb5a8.js";const e={},c=a(`<h2 id="全部接口参数" tabindex="-1"><a class="header-anchor" href="#全部接口参数" aria-hidden="true">#</a> 全部接口参数</h2><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>$ajax<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token literal-property property">url</span><span class="token operator">:</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token comment">//请求地址</span>
	<span class="token literal-property property">data</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span><span class="token comment">//请求数据</span>
	<span class="token literal-property property">tip</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><span class="token comment">//提交是否需要确认，true或string需要确认</span>
	<span class="token literal-property property">jsonData</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><span class="token comment">//是否采用jsonData格式提交</span>
	<span class="token literal-property property">sync</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><span class="token comment">//是否同步方式提交</span>
    <span class="token literal-property property">jsonp</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><span class="token comment">//默认非jsonp格式</span>
	<span class="token literal-property property">type</span> <span class="token operator">:</span> <span class="token string">&#39;post&#39;</span><span class="token punctuation">,</span><span class="token comment">//采用post方式提交</span>
	<span class="token literal-property property">loadingBar</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//loading进度条</span>
	<span class="token literal-property property">loadingMask</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//进行异步请求中，是否显示mask</span>
	<span class="token literal-property property">calltip</span> <span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//提交成功后显示请求成功信息</span>
	<span class="token function-variable function">success</span> <span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">rst</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token comment">//请求成功后，code===200或者201返回事件</span>
	<span class="token function-variable function">callback</span> <span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">rst</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token comment">//请求成功后返回事件</span>
	<span class="token function-variable function">cancelback</span> <span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token comment">//确认框点取消返回事件</span>
	<span class="token function-variable function">errback</span> <span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> textStatus<span class="token punctuation">,</span> errorThrown</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token comment">//出现错误时返回事件</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2),l=n("div",{class:"custom-container info"},[n("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},[n("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[n("circle",{cx:"12",cy:"12",r:"9"}),n("path",{d:"M12 8h.01"}),n("path",{d:"M11 12h1v4h1"})])]),n("p",{class:"custom-container-title"},"说明"),n("p",null,[n("strong",null,"$ajax.post 二次封装了异步请求，主要加入了以下交互：")]),n("ul",null,[n("li",null,"请求时会有一个加载等待显示"),n("li",null,"请求成功会返回成功提示，可自定义提示信息"),n("li",null,"失败会弹窗提示失败原因，可自定义提示信息(除请求失败)"),n("li",null,"可选择提示确认后再请求"),n("li",null,[s("默认发送formData到后台，可以选择发送json格式 ("),n("code",null,"jsonData: true"),s(")")]),n("li",null,"确定是否是同步请求")])],-1),i=n("div",{class:"custom-container warning"},[n("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},[n("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[n("circle",{cx:"12",cy:"12",r:"9"}),n("path",{d:"M12 8v4"}),n("path",{d:"M12 16h.01"})])]),n("p",{class:"custom-container-title"},"注意"),n("p",null,[s("所有异步请求方法做全局拦截，返回状态码 "),n("code",null,"500"),s(" 或者 返回json "),n("code",null,"{ code: '500',msg: '错误提示信息！' }"),s(" 都会全局拦截认为是报错。")])],-1),u=a(`<h2 id="简易模式" tabindex="-1"><a class="header-anchor" href="#简易模式" aria-hidden="true">#</a> 简易模式</h2><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// url : 请求地址</span>
<span class="token comment">// data : 请求数据</span>
<span class="token comment">// tip :  布尔值或字符串，是否提示确认后再发起请求</span>
<span class="token comment">// isJsonData : 是否是json格式(默认是formData)</span>
<span class="token comment">// sync : 是否是同步请求(默认异步)</span>
<span class="token comment">// callTip : 补丁参数，提示确认时是否需要返回提示，为true不提示</span>
$ajax<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> data<span class="token punctuation">,</span> tip<span class="token punctuation">,</span> isJsonData<span class="token punctuation">,</span>sync<span class="token punctuation">,</span>callTip<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">done</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">rst</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token comment">//</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="自由模式" tabindex="-1"><a class="header-anchor" href="#自由模式" aria-hidden="true">#</a> 自由模式</h2><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// url : 请求地址</span>
<span class="token comment">// data : 请求数据</span>
<span class="token comment">// tip :  布尔值或字符串，是否提示确认后再发起请求</span>
<span class="token comment">// isJsonData : 是否是json格式(默认是formData)</span>
<span class="token comment">// sync : 是否是同步请求(默认异步)</span>
<span class="token comment">// callTip : 补丁参数，提示确认时是否需要返回提示，为true不提示</span>
$ajax<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> data<span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">jsonData</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token literal-property property">tip</span><span class="token operator">:</span><span class="token string">&#39;您是否提交吗？&#39;</span><span class="token punctuation">,</span><span class="token literal-property property">loadingMask</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token function-variable function">success</span><span class="token operator">:</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">rst</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token comment">//返回处理</span>
<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

$ajax<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> data<span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">jsonData</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token literal-property property">tip</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">done</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">rst</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token comment">//返回处理</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>衍生的同步模式</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>$ajax<span class="token punctuation">.</span><span class="token function">postSync</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> data<span class="token punctuation">,</span> tip<span class="token punctuation">,</span> isJsonData<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">done</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">rst</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//同步模式</span>
<span class="token comment">//返回处理</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="请求的标准返回" tabindex="-1"><a class="header-anchor" href="#请求的标准返回" aria-hidden="true">#</a> 请求的标准返回</h2><p>和后端约定，除数据表格及特殊的组件外，采用标准格式返回请求如下：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token comment">//请求成功示例：</span>
<span class="token punctuation">{</span>
  <span class="token property">&quot;code&quot;</span><span class="token operator">:</span>&#39;<span class="token number">200</span>&#39;<span class="token punctuation">,</span><span class="token comment">//200表示请求成功,注意这里是字符串非数字，并使用前台默认提示,201表示请求成功用后台自定义提示</span>
  <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token comment">//200的请求使用的提示信息</span>
  <span class="token property">&quot;ohter&quot;</span><span class="token operator">:</span><span class="token string">&quot;other&quot;</span><span class="token comment">//其余属性</span>
<span class="token punctuation">}</span>
<span class="token comment">//请求失败示例：</span>
<span class="token punctuation">{</span>
  <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> &#39;<span class="token number">500</span>&#39;<span class="token punctuation">,</span><span class="token comment">//业务失败</span>
  <span class="token property">&quot;msg&quot;</span><span class="token operator">:</span><span class="token string">&quot;对不起您没有操作权限！&quot;</span><span class="token comment">//自定义提示</span>
  <span class="token property">&quot;ohter&quot;</span><span class="token operator">:</span><span class="token string">&quot;other&quot;</span><span class="token comment">//其余属性</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="全部代码示例" tabindex="-1"><a class="header-anchor" href="#全部代码示例" aria-hidden="true">#</a> 全部代码示例</h2><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//完整版</span>
$ajax<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token literal-property property">url</span> <span class="token operator">:</span> <span class="token string">&#39;/op.jhtm&#39;</span><span class="token punctuation">,</span>
	<span class="token literal-property property">data</span> <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> hospitalid <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token literal-property property">jsonData</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><span class="token comment">//采用json方式发送数据，默认是formData</span>
	<span class="token literal-property property">tip</span> <span class="token operator">:</span> <span class="token string">&#39;是否确认此操作？&#39;</span><span class="token punctuation">,</span>
	<span class="token function-variable function">success</span> <span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">rst</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token comment">//success里是code === &#39;200&#39; 或者 &#39;201&#39;才执行的事件，如果使用非标json结构请使用 callback方法</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>rst<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token function-variable function">cancelback</span> <span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//确认框点取消返回事件</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;点击了取消按钮&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">errback</span><span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> textStatus<span class="token punctuation">,</span> errorThrown</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//简易版</span>
$ajax<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&#39;/delete.jhtml&#39;</span><span class="token punctuation">,</span><span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> hospitalid <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&#39;是否确认删除选择的记录？&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">done</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">rst</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>rst<span class="token punctuation">.</span>code<span class="token operator">===</span><span class="token string">&#39;200&#39;</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token operator">...</span>
  <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
     layer<span class="token punctuation">.</span><span class="token function">msg</span><span class="token punctuation">(</span><span class="token string">&#39;您不是该医院筹备负责人，不能操作该医院!&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//提示框提示</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//发送json数据，第一个true表示需要提示确认，第二个true表示是发送复杂json到后台，第三个true表示是一个同步请求</span>
$ajax<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&#39;json/true.js&#39;</span><span class="token punctuation">,</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>changetData<span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">done</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">rst</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
<span class="token comment">//JSON.stringify()这个括号可以不写</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>rst<span class="token punctuation">.</span>code<span class="token operator">===</span><span class="token string">&#39;200&#39;</span><span class="token operator">||</span>rst<span class="token punctuation">.</span>code<span class="token operator">===</span><span class="token string">&#39;201&#39;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        $grid<span class="token punctuation">.</span><span class="token function">datagrid</span><span class="token punctuation">(</span><span class="token string">&#39;reload&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//没有数据，有提示信息</span>
$ajax<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&#39;/update.jhtml&#39;</span><span class="token punctuation">,</span><span class="token keyword">null</span><span class="token punctuation">,</span><span class="token string">&#39;是否提交此操作？&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">done</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">rst</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//只有请求地址</span>
$ajax<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&#39;/url.jhtml&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">done</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">rst</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//同步请求</span>
$ajax<span class="token punctuation">.</span><span class="token function">postSync</span><span class="token punctuation">(</span><span class="token string">&#39;/url.jhtml&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">done</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">rst</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,11),r=[c,l,i,u];function k(d,m){return p(),o("div",null,r)}const b=t(e,[["render",k],["__file","5.ajax.html.vue"]]);export{b as default};
