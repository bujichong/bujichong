import{_ as p,p as t,q as e,s as n,G as s,t as o,J as c,n as l}from"./framework-d4dfb5a8.js";const i={},u={class:"custom-container tip"},r=n("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 24 24"},[n("g",{fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},[n("circle",{cx:"12",cy:"12",r:"9"}),n("path",{d:"M12 8h.01"}),n("path",{d:"M11 12h1v4h1"})])],-1),d=n("p",{class:"custom-container-title"},"说明",-1),k=n("code",null,"$pop.iframePop",-1),v=n("strong",null,"layer",-1),m={href:"https://layuion.com/docs/modules/layer.html",target:"_blank",rel:"noopener noreferrer"},b=n("p",null,[s("除了 "),n("code",null,"layer"),s(" 的 "),n("code",null,"iframe"),s(" 模式本身，还扩展了功能：")],-1),f=n("ul",null,[n("li",null,"父子交互传递数据;"),n("li",null,[n("code",null,"iframePop"),s(" 子页面为表单，提交时，快捷刷新或执行 勾子事件 "),n("code",null,"sureback"),s("；")])],-1),h=c(`<h2 id="父子间传递数据" tabindex="-1"><a class="header-anchor" href="#父子间传递数据" aria-hidden="true">#</a> 父子间传递数据</h2><h3 id="父传子" tabindex="-1"><a class="header-anchor" href="#父传子" aria-hidden="true">#</a> 父传子：</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>
<span class="token comment">//父页面发送：</span>
$pop<span class="token punctuation">.</span><span class="token function">iframePop</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token literal-property property">postData</span> <span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//子页面接收</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&quot;pub&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token keyword">var</span> receiveData <span class="token operator">=</span> $store<span class="token punctuation">.</span><span class="token function">getPostData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token comment">//receiveData: { a: 1, b: 2 }</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="子传父" tabindex="-1"><a class="header-anchor" href="#子传父" aria-hidden="true">#</a> 子传父：</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//子页面发送：</span>
$pop<span class="token punctuation">.</span><span class="token function">closePop</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token operator">...</span>
  <span class="token literal-property property">sendData</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">&#39;user1&#39;</span> <span class="token punctuation">}</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//父页面接收：</span>
$pop<span class="token punctuation">.</span><span class="token function">iframePop</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token operator">...</span>
    <span class="token function-variable function">end</span> <span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">iframeSendData</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">//iframeSendData: {name: &#39;user1&#39; }</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">sureback</span> <span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">iframeSendData</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">//iframeSendData: {name: &#39;user1&#39; }</span>
    <span class="token punctuation">}</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="通过全局-store方法-传递参数" tabindex="-1"><a class="header-anchor" href="#通过全局-store方法-传递参数" aria-hidden="true">#</a> 通过全局 $store方法 传递参数：</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//父页面 或 子页面 设置全局变量值：</span>
$store<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&#39;kind_page_val&#39;</span><span class="token punctuation">,</span>val<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//注意全局参数命名的唯一性，全局参数会挂在 框架页的根对象上</span>

<span class="token comment">//子页面获取：</span>
$store<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;kind_page_val&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//父页面最好在勾子函数里获取：</span>
$pop<span class="token punctuation">.</span><span class="token function">iframePop</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token operator">...</span>
    <span class="token function-variable function">end</span> <span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      $store<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;kind_page_val&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">sureback</span> <span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      $store<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;kind_page_val&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="pop-iframepop" tabindex="-1"><a class="header-anchor" href="#pop-iframepop" aria-hidden="true">#</a> $pop.iframePop</h2><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>$pop<span class="token punctuation">.</span><span class="token function">iframePop</span><span class="token punctuation">(</span><span class="token string">&#39;/contacts/url.html&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//只设置url，直接默认宽高100%打开页面，标题默认为&#39;提示&#39;</span>

$pop<span class="token punctuation">.</span><span class="token function">iframePop</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;集团通讯录-修改&#39;</span><span class="token punctuation">,</span><span class="token comment">//标题</span>
    <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token string">&#39;/contacts/url.html&#39;</span><span class="token punctuation">,</span><span class="token comment">//请求地址</span>
    <span class="token literal-property property">area</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;660px&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;250px&#39;</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token comment">//窗口大小</span>
    <span class="token literal-property property">postData</span> <span class="token operator">:</span> <span class="token punctuation">{</span><span class="token literal-property property">a</span><span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token literal-property property">b</span><span class="token operator">:</span><span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token comment">//往子页面传值</span>
    <span class="token function-variable function">end</span> <span class="token operator">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">iframeSendData</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">//关闭执行函数，子页面可通过 $pop.closePop 返回参数</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">sureback</span> <span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">iframeSendData</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token comment">//表单提交| 或成功 执行函数，子页面可通过 $pop.closePop 返回参数</span>
    <span class="token punctuation">}</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&#39;#gridBox&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//刷新grid #gridBox</span>

 $pop<span class="token punctuation">.</span><span class="token function">iframePop</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;修改状态&#39;</span><span class="token punctuation">,</span><span class="token comment">//标题</span>
    <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token string">&#39;/contacts/url.html&#39;</span><span class="token punctuation">,</span><span class="token comment">//请求地址</span>
    <span class="token literal-property property">area</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&#39;100%&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;100%&#39;</span><span class="token punctuation">]</span><span class="token comment">//窗口全屏</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">&#39;#gridBox&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;#gridBox2&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//刷新grid #gridBox,#gridBox2，刷新多个grid用数组方式</span>


<span class="token comment">//子页面获取父页面传值</span>
$store<span class="token punctuation">.</span><span class="token function">getPostData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//{a:1,b:2}</span>

<span class="token comment">//子页面手动返回成功</span>
$pop<span class="token punctuation">.</span><span class="token function">closePop</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">refreshGrid</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="pop-closepop" tabindex="-1"><a class="header-anchor" href="#pop-closepop" aria-hidden="true">#</a> $pop.closePop</h2><p><code>$pop.closePop()</code>是关闭弹窗的通用关闭方法，日常我们主要用来关闭<code>iframePop</code> 。</p><p><strong>所有参数：</strong></p><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>$pop<span class="token punctuation">.</span><span class="token function">closePop</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">popIndex</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token comment">//指定pop的index，可以关闭当前页面普通的弹窗 (普通弹窗)</span>
    <span class="token function-variable function">callback</span> <span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">//关闭时执行时间 (普通弹窗 / iframePop弹窗)</span>
    <span class="token literal-property property">sendData</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token comment">//往父页面传递参数 (iframePop弹窗)</span>
    <span class="token literal-property property">success</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">//告诉父页面是否成功，会触发父页面刷新grid和 sureback勾子事件 (iframePop弹窗)</span>
    <span class="token literal-property property">refreshGrid</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><span class="token comment">// 同 success </span>
    <span class="token literal-property property">refresh</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// 同 success </span>
    <span class="token literal-property property">time</span> <span class="token operator">:</span> <span class="token boolean">false</span> <span class="token comment">//延迟关闭时间 (iframePop弹窗)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="关闭当前页面弹窗" tabindex="-1"><a class="header-anchor" href="#关闭当前页面弹窗" aria-hidden="true">#</a> 关闭当前页面弹窗</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">var</span> pop <span class="token operator">=</span> $pop<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//关闭当前页弹窗</span>
$pop<span class="token punctuation">.</span><span class="token function">closePop</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">popIndex</span><span class="token operator">:</span>pop<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
$pop<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span>pop<span class="token punctuation">)</span><span class="token punctuation">;</span>
layer<span class="token punctuation">.</span><span class="token function">closeAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="iframepop-在子页面里关闭弹窗" tabindex="-1"><a class="header-anchor" href="#iframepop-在子页面里关闭弹窗" aria-hidden="true">#</a> iframePop 在子页面里关闭弹窗</h3><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">//父页面</span>
$pop<span class="token punctuation">.</span><span class="token function">iframePop</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//子页面 取消事件</span>
$pop<span class="token punctuation">.</span><span class="token function">closePop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//子页面 提交事件</span>
$pop<span class="token punctuation">.</span><span class="token function">closePop</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">refreshGrid</span><span class="token operator">:</span><span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,17);function g(y,_){const a=l("ExternalLinkIcon");return t(),e("div",null,[n("div",u,[r,d,n("p",null,[k,s("基于"),v,s("包装， 可以帮助我们在任何地方，通过交互弹出一个内嵌页面的窗口， 除自定义参数外，其他参数可以参考 "),n("a",m,[s("layer.open"),o(a)]),s("。")]),b,f]),h])}const P=p(i,[["render",g],["__file","iframePop.html.vue"]]);export{P as default};
