(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{547:function(s,a,t){"use strict";t.r(a);var e=t(6),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("blockquote",[t("p",[s._v("根据自己的配置过程，记录一下\n")])]),s._v(" "),t("h2",{attrs:{id:"生成一个签名密钥"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#生成一个签名密钥"}},[s._v("#")]),s._v(" 生成一个签名密钥")]),s._v(" "),t("p",[s._v("Windows机器先进入JDK 的 bin 目录下（比如C:\\Program Files\\Java\\jdkx.x.x_x\\bin），才能执行keytool命令。\nmac不需要，直接执行命令即可。")]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//用keytool命令生成一个私有密钥，my-release-key.keystore的密钥库文件 ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//keytool -genkeypair -v -keystore my-release-key.keystore -alias my-key-alias -keyalg RSA -keysize 2048 -validity 20000")]),s._v("\n$ keytool \n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("genkeypair "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("v \n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("keystore my"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("release"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("keystore \n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("alias my"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("key"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("alias "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//alias 参数后面的别名，将来为应用签名时需要用到的")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("keyalg "),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("RSA")]),s._v(" \n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("keysize "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2048")]),s._v(" \n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("validity "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20000")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//-validity 20000 有效期20000天  ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//设置密钥库口令，设置密钥库密码为123456，另一个密码提示时默认设为跟密钥库密码一样（可自己选择）")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("p",[s._v("执行命令后，会发现生成了一个文件：my-release-key.keystore，这就是apk的签名密钥。")]),s._v(" "),t("h2",{attrs:{id:"设置-gradle-变量"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#设置-gradle-变量"}},[s._v("#")]),s._v(" 设置 gradle 变量")]),s._v(" "),t("ul",[t("li",[s._v("把my-release-key.keystore文件放到你工程中的android/app文件夹下。")]),s._v(" "),t("li",[s._v("编辑 /.gradle/gradle.properties 或是 项目目录/android/gradle.properties文件。")])]),s._v(" "),t("blockquote",[t("p",[s._v("说明：编辑 /.gradle/gradle.properties，修改的是全局配置，对所有项目有效。\n/android/gradle.properties（项目配置，只对所在项目有效）\n如果没有gradle.properties文件你就自己创建一个，添加如下的代码，分别为签名、别名、密钥库密码、密码")])]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MYAPP_RELEASE_STORE_FILE")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" my"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("release"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("key"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("keystore \n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MYAPP_RELEASE_KEY_ALIAS")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" my"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("key"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("alias \n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MYAPP_RELEASE_STORE_PASSWORD")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),s._v(" \n"),t("span",{pre:!0,attrs:{class:"token constant"}},[s._v("MYAPP_RELEASE_KEY_PASSWORD")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("123456")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h2",{attrs:{id:"把签名配置加入到项目的-gradle-配置中"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#把签名配置加入到项目的-gradle-配置中"}},[s._v("#")]),s._v(" 把签名配置加入到项目的 gradle 配置中")]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),s._v("\nandroid "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),s._v("\n    defaultConfig "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    signingConfigs "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        release "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          storeFile "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"my-release-key.keystore"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n          storePassword "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"123456"')]),s._v("\n          keyAlias "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"my-key-alias"')]),s._v("\n          keyPassword "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"123456"')]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    buildTypes "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        release "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n            "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),s._v("\n            signingConfig signingConfigs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("release\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("...")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br")])]),t("h2",{attrs:{id:"生成发行-apk-包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#生成发行-apk-包"}},[s._v("#")]),s._v(" 生成发行 APK 包")]),s._v(" "),t("div",{staticClass:"language-javascript line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-javascript"}},[t("code",[s._v("cd android \n \n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("gradlew assembleReleas\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("生成的 APK 文件位于android/app/build/outputs/apk/release/app-release.apk，它已经可以用来发布了")])])}),[],!1,null,null,null);a.default=n.exports}}]);